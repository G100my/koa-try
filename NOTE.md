# 筆記

## Q:Nginx 跟 AWS Elastic Load Balancer 感覺是在做類似的事情？為什麼用了 AWS Elastic Load Balancer 還需要設定 Nginx

Nginx 與 AWS Elastic Load Balancer（ELB）確實在某些方面有類似之處，它們都是用於實現負載均衡的技術。Nginx 通常用於反向代理、負載均衡、高可用性和性能優化等方面，而 AWS ELB 則是 AWS 提供的一個托管式負載均衡服務，可以自動處理流量分發、健康檢查、故障轉移等。
雖然 AWS ELB 已經提供了一些優秀的負載均衡能力，但在實際應用中，仍然需要使用 Nginx 來進行一些進階的負載均衡和性能優化操作。這是因為 Nginx 提供了更靈活和強大的配置選項，可以進行更細粒度的負載均衡控制、緩存調整、協議轉換等。
以下是使用 Nginx 與 AWS ELB 一起使用的一些常見情況：
SSL/TLS 解密：Nginx 可以用作 SSL/TLS 終端，將加密的請求解密後轉發到 ELB，這樣可以減輕 ELB 的負擔，提高性能和安全性。
調整負載均衡策略：Nginx 提供了多種負載均衡策略，可以更好地應對不同的應用場景和負載情況，例如加權輪詢、IP 哈希、最小連接數等。
健康檢查和故障轉移：Nginx 可以通過主動發送健康檢查請求來檢測服務器的可用性，並在 ELB 發生故障時實現快速故障轉移，保證服務的高可用性。
靜態資源緩存：Nginx 可以緩存靜態資源（如圖像、CSS、JavaScript 等），減少對後端服務器的請求，提高性能和網站響應速度。
總之，AWS ELB 提供了優秀的負載均衡能力，但在實際應用中仍然需要使用 Nginx 來實現進階的負載均衡和性能

ttn: SSL/TLS 的話，我們正常是會用 route53 搭配 acm ，2 3 點的話， elb 也有
4 的話，我們是用 s3 搭配 cloudfront
這些事情我們都不用在 ec2 做，ec2 專心處理 api 就好了，減少他的負擔，也減少我們的負擔

ttn:
他回答得非常好，而且沒有錯，但是那是理論不是實務
最現實的問題，就是 nginx 是跑在 ec2 而 ec2 能不能跑會不會壞，機器狀況等等是我們要負責
而 ELB 是 aws 負責，基本上 aws 很強，考慮很多狀況，所以不太會壞，而且可以整合很多不同的服務。 架構面上 ec2 的範圍很小，而且是被視為不穩定的服務，也就是隨時可能會壞 (edited)
可以整合的例子是，ELB 可以紀錄所有的 request log ，有非法連線還可以設定自動執行對應的動作或是寄信發簡訊通知你，而且 log 是存在 s3 然後還有專門分析 log 的工具，可以像下 sql 那樣找出自己要的那次連線，一切的設定在網頁上點幾個按鈕就好了，這個前提下，request 都還沒到 ec2，所以 ec2 是被保護在後面的 (edited)
相反的，你用 ec2 的 nginx ，做這件事情，光是 log 就會寫爆硬碟了，更不用說扛不住的時候，ec2 掛了就什麼都沒了，服務直接掛掉
